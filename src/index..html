<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>hammer.js使用测试</title>
	<link href="css/css.css" type="text/css" rel="stylesheet" />
	<style>
		html,body{
			margin:0;
			padding: 0;
			width: 100px;
			height: 100px;
			background-color: #ddd;
		}
		#puzzle{
			position: absolute;
			top: 40%;
			left: 20%;
			width: 340px;
			height: 260px;
		}
		#puzzle .container{
			float: left;
			width: 107px;
			height: 80px;
		}
		#puzzle .container{
			display: block;
			margin: 4px;
			width: 99px;
			height: 72px;
			background-color: #fff;
		}
		#video{
			opacity: 0;
		}
		canvas{
			/*background-color: cyan;*/
			width: 99px;
			height: 72px;
		}
	</style>
</head>
<!-- <canvas id="cas"></canvas> -->
<div id="puzzle">
	<div class="container"></div>
	<div class="container"></div>
	<div class="container"></div>
	<div class="container"></div>
	<div class="container"></div>
	<div class="container"></div>
	<div class="container"></div>
	<div class="container"></div>
	<div class="container"></div>
</div>
	<video width="320" height="240" id="video" autoplay="autoplay" loop>
		<source src="video/movie.mp4" type="video/mp4" media="">
	</video>
</body>
</html>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/hammer.js/2.0.8/hammer.js"></script>
<script src="js/jquery.hammer.js"></script>
<script>
	var box = document.querySelector("#puzzle");
	var boxTop = box.offsetTop;
	var boxLeft = box.offsetLeft;
	var boxRight = box.offsetLeft + box.offsetWidth;
	var boxBottom = box.offsetTop + box.offsetHeight;
	var arrLis = document.querySelectorAll("#puzzle .container");
	//var arrOk=[]; //用来保存正确的序号
	var ctx = [];
	function Ballon(num) {

		this.randomNum = num+1;
		//屏幕的宽度和高度
		this.maxWidth = document.documentElement.clientWidth || document.body.clientWidth;
		this.maxHeight = document.documentElement.clientHeight || document.body.clientHeight;
		//气球的X轴的位置，Y轴的位置
		this.posX = randomNumber(0, this.maxWidth-150);
		this.posY = randomNumber(0, this.maxHeight-150);
		
		//1、添加初始化事件，appendChild到屏幕上
		this.initialize();
		//3、添加加事件绑定，响应点击，以及没被点击后的操作
		this.addEvent();
		
	}
	Ballon.prototype.initialize = function(){
		//创建DOM
		this.dom = document.createElement("canvas");
		this.dom.className = "ballon";
		this.dom.setAttribute("data-top", "0");
		this.dom.setAttribute("data-left", "0");
		// this.dom.setAttribute("data-index",a);
		this.dom.style.position = "absolute";
		var suijiX = Math.floor(Math.random()*1000);
		var suijiY = Math.floor(Math.random()*700);
		this.dom.style.left = suijiX + "px";
		this.dom.style.top = suijiY + "px";
		this.dom.width = 107;
		this.dom.height = 80;
		this.dom.style.height ="80";
		var video = document.getElementById('video');
		window.document.body.append(this.dom);
		var context = this.dom.getContext("2d");
		ctx.push(context);

		document.body.appendChild( this.dom );
	}
	function drawVideo(){
		for( var i=0; i<9; i++){
			//每个九宫格的索引值和坐标位置的转换关系
			var row = Math.floor (i / 3) //取余数获取行数
			var col =  Math.floor( i %3) //取模获得列数
			ctx[i].drawImage(video, (col*107), (row*80), 107,80, 0, 0, 107, 80);
    	}
	}
	setInterval(function(){	drawVideo(); },50)
	function randomNumber(min, max){
		return Math.floor( Math.random()*(max-min) + min);
	}

	Ballon.prototype.addEvent = function(){
		var that = this;
		this.dom.onmousedown = function(){
			 document.onmousemove=function (evt) {
	            var event=evt||window.event;
	            that.dom.style.left=event.clientX-that.dom.offsetWidth/2+"px";
	            that.dom.style.top=event.clientY-that.dom.offsetHeight/2+"px";          
	        }
	     	document.onmouseup=function (evt) {
	        	var event=evt||window.event;
	    		var picPosX = event.clientX;
	    		var picPosY = event.clientY;       	
	         	document.onmousemove=null;
	         	
	    	}
		}
	}

	var ballArr=[]; 
	for (var i = 0; i < 9; i++) {
		ballArr.push(new Ballon(i));
	}
	
</script>
